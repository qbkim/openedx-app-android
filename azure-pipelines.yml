trigger:
  - main  # Adjust the branch as needed

pool:
  vmImage: 'ubuntu-latest'

steps:
  - task: JavaToolInstaller@0
    inputs:
      versionSpec: '17'  # Set the required Java version
      jdkArchitectureOption: 'x64'  # Specify the architecture
      jdkSourceOption: 'PreInstalled'  # Use pre-installed JDK on the agent

  - script: |
      yes | sdkmanager --install "platforms;android-33" "build-tools;33.0.0"
    displayName: 'Install Android SDK'

  - task: Gradle@3
    inputs:
      gradleWrapperFile: 'gradlew'
      tasks: 'build'
      options: '--stacktrace --info'
      publishJUnitResults: true
      testResultsFiles: '**/TEST-*.xml'

  - script: |
      export ORG_GRADLE_JVM_ARGS="-Xmx3072m"
      ./gradlew build --stacktrace --info
    displayName: 'Run Gradle Build'

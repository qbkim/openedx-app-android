trigger:
- main

pool:
  vmImage: 'ubuntu-latest'

variables:
  buildDir: '$(Build.SourcesDirectory)'

steps:
- task: Checkout@1

- script: |
    echo "Fixing Android SDK path..."
    unset ANDROID_SDK_ROOT
    export ANDROID_HOME=/opt/hostedtoolcache/AndroidSDK
  displayName: 'Fix Android SDK Path'

- task: Gradle@3
  inputs:
    gradleWrapperFile: '$(buildDir)/gradlew'
    workingDirectory: '$(buildDir)'
    options: '--console=plain --stacktrace'
    tasks: 'assembleDebug'
    publishJUnitResults: true
    testResultsFiles: '**/TEST-*.xml'
  displayName: 'Build with Gradle'
